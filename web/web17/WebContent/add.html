<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link rel="stylesheet" type="text/css" href="source/css/reset.css">
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap">
	<link rel="stylesheet" type="text/css" href="source/css/bit_grid.css">
	<link rel="stylesheet" type="text/css" href="source/css/layout.css">
	<script type="text/javascript">
		var err, form, input1, input2, textarea, btnBack, btnSubmit;
		var xhr;
		function callback(e) {
			e.preventDefault();
			
			err = document.querySelector(".err");
			err.innerText = "";
			input1 = form.getElementsByTagName("input")[0];
			input2 = form.getElementsByTagName("input")[1];
			textarea = form.getElementsByTagName("textarea")[0];
			
			if (input1.value == "" || input2.value == "") {
				err.innerText = "제목 또는 작성자를 입력해주세요";
				return;
			}
			
			xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200) {
					window.location.replace("list.html");
				} else if (xhr.readyState == 4) {
					alert("입력 실패");
					window.history.back();
				}
			};
			
			xhr.open("get", "add.jsp?sub=" + input1.value + "&id=" + input2.value + "&content=" + textarea.value);
			xhr.send();
		}
		window.onload = function(){
			form = document.querySelector(".write form");
			form.addEventListener("submit", callback);
			
			btnBack = document.getElementsByTagName("button")[0];
			btnBack.onclick = function() {
				window.history.back();
			};
		}
	</script>
</head>
<body>
	<div class="container">
		<div id="header" class="row">
			<div class="grid12">
				<h1>비트교육센터</h1>
			</div>
		</div>
		<div id="menu" class="row">
			<div class="grid12">
				<ul>
					<li><a href="index.html">HOME</a></li>
					<li><a href="list.html">BBS</a></li>
					<li><a href="#">LOGIN</a></li>
					<li><a href="#">ETC</a></li>
				</ul>
			</div>
		</div>
		<div id="content" class="row">
			<div class="grid12">
				<div class="write">
					<h2>게시물 작성</h2>
					<form>
						<div>
							<label for="sub">제목</label>
							<input type="text" id="sub">
						</div>
						<div>
							<label for="id">작성자</label>
							<input type="text" id="id">
						</div>
						<div>
							<textarea></textarea>
						</div>
						<div class="err"></div>
						<div class="btns_box">
							<button type="button">취소</button>
							<button type="submit">완료</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div id="footer" class="row">
			<div class="grid12">
				<p>비트캠프 서울시 서초구 강남대로 459 (서초동, 백암빌딩)</p>
				<p>Copyright &copy; 비트캠프 All rights reserved.</p>
			</div>
		</div>
	</div>
</body>
</html>